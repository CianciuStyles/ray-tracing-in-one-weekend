/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package io.github.cianciustyles

import java.io.File

fun main() {
    // Image
    val imageWidth = 256
    val imageHeight = 256

    // Render
    File("image.ppm").bufferedWriter().use { image ->
        image.write("")
        image.write("P3\n")
        image.write("$imageWidth $imageHeight\n")
        image.write("255\n")

        for (j in (0 until imageHeight).reversed()) {
            System.err.println("Scanlines remaining: $j")

            for (i in 0 until imageWidth) {
                val pixelColor = Color(
                    i.toDouble() / (imageWidth - 1),
                    j.toDouble() / (imageHeight - 1),
                    0.25
                )

                image.write("$pixelColor\n")
            }
        }
    }

    System.err.println("Done.")
}
